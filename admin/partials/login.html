<template x-if="view === 'login' && ready">
  <div class="relative min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(99,102,241,0.24),_transparent_55%)]"></div>
    <div class="relative z-10 flex min-h-screen items-center justify-center px-4 py-16">
      <form class="w-full max-w-lg rounded-3xl border border-white/10 bg-white/5 p-10 text-slate-100 shadow-2xl backdrop-blur" @submit.prevent="submitLogin" aria-labelledby="login-title">
        <div class="mb-8 space-y-3">
          <span class="inline-flex items-center gap-2 rounded-full bg-indigo-500/15 px-4 py-1 text-xs font-semibold uppercase tracking-[0.28em] text-indigo-400">Clower Edit</span>
          <h1 id="login-title" class="font-display text-3xl font-semibold text-white">Connexion</h1>
          <p class="text-sm text-slate-300">Choisissez un site et identifiez-vous pour accéder au studio d’édition.</p>
        </div>
        <div class="grid gap-6">
          <label class="space-y-2 text-sm">
            <span class="font-semibold uppercase tracking-wider text-slate-300">Site</span>
            <div class="relative">
              <select class="w-full appearance-none rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500" x-model="siteId" @change="switchSite($event.target.value)">
                <template x-for="site in sites" :key="site">
                  <option class="bg-slate-950 text-slate-200" :value="site" x-text="site"></option>
                </template>
              </select>
              <svg class="pointer-events-none absolute right-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M6 9l6 6 6-6" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </div>
          </label>
          <label class="space-y-2 text-sm">
            <span class="font-semibold uppercase tracking-wider text-slate-300">Identifiant</span>
            <input type="text" class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-slate-500 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500" x-model="login.username" autocomplete="username" />
          </label>
          <label class="space-y-2 text-sm">
            <span class="font-semibold uppercase tracking-wider text-slate-300">Mot de passe</span>
            <input type="password" class="w-full rounded-2xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-white placeholder:text-slate-500 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500" x-model="login.password" autocomplete="current-password" />
          </label>
          <p class="text-sm text-rose-400" x-text="login.error"></p>
          <button type="submit" class="flex items-center justify-center gap-2 rounded-2xl bg-indigo-500 px-5 py-3 text-sm font-semibold text-white shadow-lg transition duration-150 ease-out hover:scale-[1.02] hover:bg-indigo-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-500">
            <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M5 12h14M12 5l7 7-7 7" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            Se connecter
          </button>
        </div>
      </form>
    </div>
  </div>
</template>
