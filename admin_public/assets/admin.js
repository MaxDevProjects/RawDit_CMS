(()=>{document.addEventListener("DOMContentLoaded",()=>{console.log("[admin] Atelier charg\xE9");let s=document.querySelector("[data-logout]");s&&s.addEventListener("click",async()=>{s.disabled=!0;try{await fetch("/api/logout",{method:"POST",headers:{"Content-Type":"application/json"}})}catch(t){console.error("[admin] Impossible de se d\xE9connecter",t)}finally{window.location.href="/admin/login.html"}});let d=document.querySelector("[data-admin-sidebar]"),e=document.querySelector("[data-admin-sidebar-overlay]"),c=document.querySelectorAll("[data-admin-sidebar-toggle]"),l=document.querySelectorAll("[data-admin-sidebar-close]"),i=document.body,o=!1,n=()=>{if(!d)return;if(window.matchMedia("(min-width: 1024px)").matches){d.classList.remove("hidden"),e==null||e.classList.add("hidden"),i.classList.remove("overflow-hidden");return}o?(d.classList.remove("hidden"),e==null||e.classList.remove("hidden"),i.classList.add("overflow-hidden")):(d.classList.add("hidden"),e==null||e.classList.add("hidden"),i.classList.remove("overflow-hidden"))},r=()=>{o=!0,n()},a=()=>{o=!1,n()};d&&c.length>0&&(c.forEach(t=>{t.addEventListener("click",r)}),l.forEach(t=>{t.addEventListener("click",a)}),e==null||e.addEventListener("click",a),window.addEventListener("resize",n),window.addEventListener("keydown",t=>{t.key==="Escape"&&o&&a()}),n())});})();
