(()=>{document.addEventListener("DOMContentLoaded",()=>{console.log("[admin] Atelier charg\xE9");let A=document.querySelector("[data-logout]");A&&A.addEventListener("click",async()=>{A.disabled=!0;try{await fetch("/api/logout",{method:"POST",headers:{"Content-Type":"application/json"}})}catch(e){console.error("[admin] Impossible de se d\xE9connecter",e)}finally{window.location.href="/admin/login.html"}});let y=document.querySelector("[data-admin-sidebar]"),r=document.querySelector("[data-admin-sidebar-overlay]"),P=document.querySelectorAll("[data-admin-sidebar-toggle]"),Q=document.querySelectorAll("[data-admin-sidebar-close]"),T=document.body,k=!1,v=()=>{if(!y)return;if(window.matchMedia("(min-width: 1024px)").matches){y.classList.remove("hidden"),r==null||r.classList.add("hidden"),T.classList.remove("overflow-hidden");return}k?(y.classList.remove("hidden"),r==null||r.classList.remove("hidden"),T.classList.add("overflow-hidden")):(y.classList.add("hidden"),r==null||r.classList.add("hidden"),T.classList.remove("overflow-hidden"))},X=()=>{k=!0,v()},N=()=>{k=!1,v()};y&&P.length>0&&(P.forEach(e=>{e.addEventListener("click",X)}),Q.forEach(e=>{e.addEventListener("click",N)}),r==null||r.addEventListener("click",N),window.addEventListener("resize",v),window.addEventListener("keydown",e=>{e.key==="Escape"&&k&&N()}),v());let $="clower:currentSite",R="clower:currentSiteName",a={slug:null,name:""};(()=>{try{a.slug=window.localStorage.getItem($),a.name=window.localStorage.getItem(R)||""}catch{a.slug=null,a.name=""}})();let B=document.querySelectorAll("[data-site-card]"),Z=document.querySelectorAll("[data-site-select]"),L=document.querySelector("[data-current-site-name]"),V=document.querySelector("[data-workspace-site-name]"),U=document.querySelector("[data-workspace-back-name]"),p=document.querySelector("[data-workspace-back-modal]"),ee=document.querySelectorAll("[data-workspace-back]"),te=document.querySelectorAll("[data-workspace-back-cancel]"),I=document.querySelector("[data-workspace-back-confirm]"),se=document.querySelectorAll("[data-workspace-tab]"),M=document.querySelector("[data-site-toast]"),_=document.querySelector("[data-site-toast-message]"),ne=document.querySelectorAll("[data-site-create]"),o=document.querySelector("[data-site-modal]"),S=document.querySelector("[data-site-form]"),d=document.querySelector("[data-site-name]"),m=document.querySelector("[data-site-slug]"),i=document.querySelector("[data-site-slug-error]"),f=document.querySelector("[data-site-modal-error]"),ae=document.querySelectorAll("[data-site-modal-cancel]"),w=document.querySelector("[data-site-modal-submit]"),j=ue(),C=!1,E=null,z=null,oe='a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])',W=e=>{if(!o||o.classList.contains("hidden")||e.key!=="Tab")return;let t=Array.from(o.querySelectorAll(oe)).filter(c=>!c.hasAttribute("disabled")&&!c.getAttribute("aria-hidden"));if(t.length===0)return;let s=t[0],n=t[t.length-1];e.shiftKey?document.activeElement===s&&(e.preventDefault(),n.focus()):document.activeElement===n&&(e.preventDefault(),s.focus())},K=e=>{!M||!_||(_.textContent=e,M.classList.remove("hidden"),z&&clearTimeout(z),z=setTimeout(()=>{M.classList.add("hidden")},2500))},g=e=>e?e.startsWith("/")?e:`/${e}`:"",J=e=>(e==null?void 0:e.replace(/^\//,""))||"",b=(e,t)=>{let s=e?g(e):null;try{s&&(window.localStorage.setItem($,s),a.slug=s),typeof t=="string"&&t.length>0&&(window.localStorage.setItem(R,t),a.name=t)}catch{a.slug=s||a.slug,a.name=t||a.name}},O=e=>{L&&e&&(L.textContent=e),V&&e&&(V.textContent=e),U&&e&&(U.textContent=e)},q=(e,t={})=>{if(!e)return;let s=g(e),n=t.siteName||a.name||(L==null?void 0:L.dataset.defaultSiteName)||"";B.forEach(c=>{let l=g(c.dataset.siteCard||"")===s,u=c.querySelector("[data-site-active-badge]");l?(c.classList.add("border-[#9C6BFF]","ring-2","ring-[#9C6BFF]","shadow-md"),c.classList.remove("border-slate-200"),u==null||u.classList.remove("hidden"),n=c.dataset.siteName||n):(c.classList.remove("border-[#9C6BFF]","ring-2","ring-[#9C6BFF]","shadow-md"),c.classList.add("border-slate-200"),u==null||u.classList.add("hidden"))}),t.persist!==!1&&b(s,t.siteName||n),O(t.siteName||n)},ie=async(e,t)=>{let s=g(e);try{let n=await fetch("/api/sites/select",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:s})});if(!n.ok){let F=await n.json().catch(()=>({}));K(F.message||"Impossible de s\xE9lectionner ce site.");return}let c=await n.json().catch(()=>({})),h=g(c.slug||s),l=c.name||t;b(h,l),q(h,{siteName:l,persist:!1});let u=encodeURIComponent(J(h));window.location.href=`/admin/site/${u}/design`}catch(n){console.error("[admin] Impossible de s\xE9lectionner le site",n),K("Erreur inattendue lors de la s\xE9lection.")}},ce=async()=>{try{let e=await fetch("/api/sites/current",{credentials:"same-origin"});if(!e.ok){e.status===404&&j&&(window.location.href="/admin/sites");return}let t=await e.json(),s=g(t.slug);b(s,t.name),q(s,{siteName:t.name,persist:!1})}catch(e){console.warn("[admin] Impossible de r\xE9cup\xE9rer le site actif",e)}};(()=>{if(a.slug){q(a.slug,{siteName:a.name,persist:!1});return}let e=document.querySelector('[data-site-card][data-site-default="true"]')||B[0];e&&q(e.dataset.siteCard,{siteName:e.dataset.siteName||"",persist:!1})})(),ce(),Z.forEach(e=>{e.addEventListener("click",()=>{if(e.disabled)return;let t=e.dataset.siteSelect,s=e.dataset.siteSelectName||"Ce site";t&&(e.disabled=!0,ie(t,s).finally(()=>{e.disabled=!1}))})});let D=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),re=e=>{let t=D(e||"");return t?`/${t}`:""},de=()=>{o&&(E=document.activeElement,o.classList.remove("hidden"),o.classList.add("flex"),C=!1,S==null||S.reset(),i&&(i.textContent=""),f&&(f.textContent=""),m&&d&&(m.value=D(d.value)),document.addEventListener("keydown",W),window.setTimeout(()=>{d==null||d.focus()},0))},x=()=>{o&&(o.classList.add("hidden"),o.classList.remove("flex"),document.removeEventListener("keydown",W),C=!1,S==null||S.reset(),i&&(i.textContent=""),f&&(f.textContent=""),E==null||E.focus())};ne.forEach(e=>{e.addEventListener("click",de)}),ae.forEach(e=>{e.addEventListener("click",x)}),o==null||o.addEventListener("click",e=>{e.target===o&&x()}),d==null||d.addEventListener("input",()=>{m&&(!C||m.value.trim().length===0)&&(m.value=D(d.value))}),m==null||m.addEventListener("input",()=>{C=!0,i&&(i.textContent="")});let le=()=>new Set(Array.from(B).map(e=>g(e.dataset.siteCard||"")));S==null||S.addEventListener("submit",async e=>{if(e.preventDefault(),!d||!m)return;let t=(d.value||"").trim(),s=m.value||"";s||(s=t);let n=re(s);if(!t||!n){i&&(i.textContent="Nom et slug sont requis.");return}if(le().has(n)){i&&(i.textContent="Ce slug est d\xE9j\xE0 utilis\xE9.");return}i&&(i.textContent=""),f&&(f.textContent=""),w&&(w.disabled=!0,w.textContent="Cr\xE9ation...");try{let h=await fetch("/api/sites",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t,slug:n})});if(!h.ok){let G=await h.json().catch(()=>({})),H=G.message||"Impossible de cr\xE9er ce site.";f&&(f.textContent=H),G.field==="slug"&&i&&(i.textContent=H);return}let l=await h.json(),u=g((l==null?void 0:l.slug)||n),F=(l==null?void 0:l.name)||t;b(u,F),x();let fe=encodeURIComponent(J(u));window.location.href=`/admin/site/${fe}/design`}catch(h){console.error("[admin] Impossible de cr\xE9er le site",h),f&&(f.textContent="Erreur inattendue. R\xE9essaie dans un instant.")}finally{w&&(w.disabled=!1,w.textContent="Cr\xE9er")}}),window.addEventListener("keydown",e=>{e.key==="Escape"&&(o&&!o.classList.contains("hidden")&&x(),p&&!p.classList.contains("hidden")&&Y())});function ue(){let e=window.location.pathname.match(/^\/admin\/site\/([^/]+)(?:\/([^/]+))?/);return e?{slugPart:decodeURIComponent(e[1]),slugValue:g(decodeURIComponent(e[1])),section:e[2]||"design"}:null}function me(){if(!p){window.location.href="/admin/sites";return}p.classList.remove("hidden"),p.classList.add("flex")}function Y(){p&&(p.classList.add("hidden"),p.classList.remove("flex"))}ee.forEach(e=>{e.addEventListener("click",me)}),te.forEach(e=>{e.addEventListener("click",Y)}),I==null||I.addEventListener("click",()=>{window.location.href="/admin/sites"}),j&&(se.forEach(e=>{let t=e.dataset.workspaceTab;if(!t)return;let s=`/admin/site/${encodeURIComponent(j.slugPart)}/${t}`;e.href=s}),a.name&&O(a.name))});})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vY29yZS9zY3JpcHRzL2FkbWluLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnW2FkbWluXSBBdGVsaWVyIGNoYXJnXHUwMEU5Jyk7XG4gIGNvbnN0IGxvZ291dEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxvZ291dF0nKTtcbiAgaWYgKGxvZ291dEJ1dHRvbikge1xuICAgIGxvZ291dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxvZ291dEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICBhd2FpdCBmZXRjaCgnL2FwaS9sb2dvdXQnLCB7XG4gICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbYWRtaW5dIEltcG9zc2libGUgZGUgc2UgZFx1MDBFOWNvbm5lY3RlcicsIGVycik7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWRtaW4vbG9naW4uaHRtbCc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYWRtaW4tc2lkZWJhcl0nKTtcbiAgY29uc3Qgc2lkZWJhck92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hZG1pbi1zaWRlYmFyLW92ZXJsYXldJyk7XG4gIGNvbnN0IHNpZGViYXJUb2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtYWRtaW4tc2lkZWJhci10b2dnbGVdJyk7XG4gIGNvbnN0IHNpZGViYXJDbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1hZG1pbi1zaWRlYmFyLWNsb3NlXScpO1xuICBjb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgbGV0IHNpZGViYXJPcGVuID0gZmFsc2U7XG5cbiAgY29uc3QgYXBwbHlTaWRlYmFyU3RhdGUgPSAoKSA9PiB7XG4gICAgaWYgKCFzaWRlYmFyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGlzRGVza3RvcCA9IHdpbmRvdy5tYXRjaE1lZGlhKCcobWluLXdpZHRoOiAxMDI0cHgpJykubWF0Y2hlcztcbiAgICBpZiAoaXNEZXNrdG9wKSB7XG4gICAgICBzaWRlYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgc2lkZWJhck92ZXJsYXk/LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyZmxvdy1oaWRkZW4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHNpZGViYXJPcGVuKSB7XG4gICAgICBzaWRlYmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgc2lkZWJhck92ZXJsYXk/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgYm9keS5jbGFzc0xpc3QuYWRkKCdvdmVyZmxvdy1oaWRkZW4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2lkZWJhci5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIHNpZGViYXJPdmVybGF5Py5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcmZsb3ctaGlkZGVuJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IG9wZW5TaWRlYmFyID0gKCkgPT4ge1xuICAgIHNpZGViYXJPcGVuID0gdHJ1ZTtcbiAgICBhcHBseVNpZGViYXJTdGF0ZSgpO1xuICB9O1xuXG4gIGNvbnN0IGNsb3NlU2lkZWJhciA9ICgpID0+IHtcbiAgICBzaWRlYmFyT3BlbiA9IGZhbHNlO1xuICAgIGFwcGx5U2lkZWJhclN0YXRlKCk7XG4gIH07XG5cbiAgaWYgKHNpZGViYXIgJiYgc2lkZWJhclRvZ2dsZXMubGVuZ3RoID4gMCkge1xuICAgIHNpZGViYXJUb2dnbGVzLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblNpZGViYXIpO1xuICAgIH0pO1xuICAgIHNpZGViYXJDbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVNpZGViYXIpO1xuICAgIH0pO1xuICAgIHNpZGViYXJPdmVybGF5Py5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlU2lkZWJhcik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGFwcGx5U2lkZWJhclN0YXRlKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScgJiYgc2lkZWJhck9wZW4pIHtcbiAgICAgICAgY2xvc2VTaWRlYmFyKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgYXBwbHlTaWRlYmFyU3RhdGUoKTtcbiAgfVxuXG4gIGNvbnN0IEFDVElWRV9TSVRFX0tFWSA9ICdjbG93ZXI6Y3VycmVudFNpdGUnO1xuICBjb25zdCBBQ1RJVkVfU0lURV9OQU1FX0tFWSA9ICdjbG93ZXI6Y3VycmVudFNpdGVOYW1lJztcbiAgY29uc3Qgc3RvcmVkU2l0ZSA9IHsgc2x1ZzogbnVsbCwgbmFtZTogJycgfTtcbiAgY29uc3QgbG9hZFN0b3JlZFNpdGUgPSAoKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHN0b3JlZFNpdGUuc2x1ZyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShBQ1RJVkVfU0lURV9LRVkpO1xuICAgICAgc3RvcmVkU2l0ZS5uYW1lID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKEFDVElWRV9TSVRFX05BTUVfS0VZKSB8fCAnJztcbiAgICB9IGNhdGNoIHtcbiAgICAgIHN0b3JlZFNpdGUuc2x1ZyA9IG51bGw7XG4gICAgICBzdG9yZWRTaXRlLm5hbWUgPSAnJztcbiAgICB9XG4gIH07XG4gIGxvYWRTdG9yZWRTaXRlKCk7XG5cbiAgY29uc3Qgc2l0ZUNhcmRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2l0ZS1jYXJkXScpO1xuICBjb25zdCBzaXRlU2VsZWN0QnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNpdGUtc2VsZWN0XScpO1xuICBjb25zdCBzaXRlTmFtZUxhYmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtY3VycmVudC1zaXRlLW5hbWVdJyk7XG4gIGNvbnN0IHdvcmtzcGFjZVNpdGVMYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXdvcmtzcGFjZS1zaXRlLW5hbWVdJyk7XG4gIGNvbnN0IHdvcmtzcGFjZUJhY2tOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtd29ya3NwYWNlLWJhY2stbmFtZV0nKTtcbiAgY29uc3Qgd29ya3NwYWNlQmFja01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtd29ya3NwYWNlLWJhY2stbW9kYWxdJyk7XG4gIGNvbnN0IHdvcmtzcGFjZUJhY2tCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtd29ya3NwYWNlLWJhY2tdJyk7XG4gIGNvbnN0IHdvcmtzcGFjZUJhY2tDYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS13b3Jrc3BhY2UtYmFjay1jYW5jZWxdJyk7XG4gIGNvbnN0IHdvcmtzcGFjZUJhY2tDb25maXJtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtd29ya3NwYWNlLWJhY2stY29uZmlybV0nKTtcbiAgY29uc3Qgd29ya3NwYWNlTmF2TGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS13b3Jrc3BhY2UtdGFiXScpO1xuICBjb25zdCBzaXRlVG9hc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaXRlLXRvYXN0XScpO1xuICBjb25zdCBzaXRlVG9hc3RNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc2l0ZS10b2FzdC1tZXNzYWdlXScpO1xuICBjb25zdCBzaXRlQ3JlYXRlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLXNpdGUtY3JlYXRlXScpO1xuICBjb25zdCBzaXRlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaXRlLW1vZGFsXScpO1xuICBjb25zdCBzaXRlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpdGUtZm9ybV0nKTtcbiAgY29uc3Qgc2l0ZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpdGUtbmFtZV0nKTtcbiAgY29uc3Qgc2l0ZVNsdWdJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpdGUtc2x1Z10nKTtcbiAgY29uc3Qgc2l0ZVNsdWdFcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpdGUtc2x1Zy1lcnJvcl0nKTtcbiAgY29uc3Qgc2l0ZU1vZGFsRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaXRlLW1vZGFsLWVycm9yXScpO1xuICBjb25zdCBzaXRlTW9kYWxDYW5jZWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2l0ZS1tb2RhbC1jYW5jZWxdJyk7XG4gIGNvbnN0IHNpdGVNb2RhbFN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpdGUtbW9kYWwtc3VibWl0XScpO1xuICBjb25zdCB3b3Jrc3BhY2VDb250ZXh0ID0gZ2V0V29ya3NwYWNlQ29udGV4dCgpO1xuICBsZXQgc2x1Z01hbnVhbGx5RWRpdGVkID0gZmFsc2U7XG4gIGxldCBsYXN0Rm9jdXNlZEVsZW1lbnQgPSBudWxsO1xuICBsZXQgdG9hc3RUaW1lb3V0SWQgPSBudWxsO1xuXG4gIGNvbnN0IGZvY3VzYWJsZVNlbGVjdG9yID1cbiAgICAnYVtocmVmXSwgYnV0dG9uOm5vdChbZGlzYWJsZWRdKSwgdGV4dGFyZWEsIGlucHV0LCBzZWxlY3QsIFt0YWJpbmRleF06bm90KFt0YWJpbmRleD1cIi0xXCJdKSc7XG4gIGNvbnN0IHRyYXBGb2N1cyA9IChldmVudCkgPT4ge1xuICAgIGlmICghc2l0ZU1vZGFsIHx8IHNpdGVNb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpIHx8IGV2ZW50LmtleSAhPT0gJ1RhYicpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZm9jdXNhYmxlRWxlbWVudHMgPSBBcnJheS5mcm9tKHNpdGVNb2RhbC5xdWVyeVNlbGVjdG9yQWxsKGZvY3VzYWJsZVNlbGVjdG9yKSkuZmlsdGVyKFxuICAgICAgKGVsKSA9PiAhZWwuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpICYmICFlbC5nZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyksXG4gICAgKTtcbiAgICBpZiAoZm9jdXNhYmxlRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGZpcnN0ID0gZm9jdXNhYmxlRWxlbWVudHNbMF07XG4gICAgY29uc3QgbGFzdCA9IGZvY3VzYWJsZUVsZW1lbnRzW2ZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgIGlmIChldmVudC5zaGlmdEtleSkge1xuICAgICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGZpcnN0KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGxhc3QuZm9jdXMoKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgPT09IGxhc3QpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBmaXJzdC5mb2N1cygpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzaG93VG9hc3QgPSAobWVzc2FnZSkgPT4ge1xuICAgIGlmICghc2l0ZVRvYXN0IHx8ICFzaXRlVG9hc3RNZXNzYWdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNpdGVUb2FzdE1lc3NhZ2UudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIHNpdGVUb2FzdC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBpZiAodG9hc3RUaW1lb3V0SWQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0b2FzdFRpbWVvdXRJZCk7XG4gICAgfVxuICAgIHRvYXN0VGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzaXRlVG9hc3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgfSwgMjUwMCk7XG4gIH07XG5cbiAgY29uc3QgZW5zdXJlTGVhZGluZ1NsYXNoID0gKHNsdWcpID0+IHtcbiAgICBpZiAoIXNsdWcpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIHNsdWcuc3RhcnRzV2l0aCgnLycpID8gc2x1ZyA6IGAvJHtzbHVnfWA7XG4gIH07XG5cbiAgY29uc3Qgc3RyaXBMZWFkaW5nU2xhc2ggPSAoc2x1ZykgPT4gc2x1Zz8ucmVwbGFjZSgvXlxcLy8sICcnKSB8fCAnJztcblxuICBjb25zdCBwZXJzaXN0U2l0ZVN0YXRlID0gKHNsdWcsIG5hbWUpID0+IHtcbiAgICBjb25zdCBub3JtYWxpemVkU2x1ZyA9IHNsdWcgPyBlbnN1cmVMZWFkaW5nU2xhc2goc2x1ZykgOiBudWxsO1xuICAgIHRyeSB7XG4gICAgICBpZiAobm9ybWFsaXplZFNsdWcpIHtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKEFDVElWRV9TSVRFX0tFWSwgbm9ybWFsaXplZFNsdWcpO1xuICAgICAgICBzdG9yZWRTaXRlLnNsdWcgPSBub3JtYWxpemVkU2x1ZztcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycgJiYgbmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShBQ1RJVkVfU0lURV9OQU1FX0tFWSwgbmFtZSk7XG4gICAgICAgIHN0b3JlZFNpdGUubmFtZSA9IG5hbWU7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICBzdG9yZWRTaXRlLnNsdWcgPSBub3JtYWxpemVkU2x1ZyB8fCBzdG9yZWRTaXRlLnNsdWc7XG4gICAgICBzdG9yZWRTaXRlLm5hbWUgPSBuYW1lIHx8IHN0b3JlZFNpdGUubmFtZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlU2l0ZUxhYmVscyA9IChuYW1lKSA9PiB7XG4gICAgaWYgKHNpdGVOYW1lTGFiZWwgJiYgbmFtZSkge1xuICAgICAgc2l0ZU5hbWVMYWJlbC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgfVxuICAgIGlmICh3b3Jrc3BhY2VTaXRlTGFiZWwgJiYgbmFtZSkge1xuICAgICAgd29ya3NwYWNlU2l0ZUxhYmVsLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB9XG4gICAgaWYgKHdvcmtzcGFjZUJhY2tOYW1lICYmIG5hbWUpIHtcbiAgICAgIHdvcmtzcGFjZUJhY2tOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYXBwbHlBY3RpdmVTaXRlID0gKHNsdWcsIG9wdGlvbnMgPSB7fSkgPT4ge1xuICAgIGlmICghc2x1Zykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkU2x1ZyA9IGVuc3VyZUxlYWRpbmdTbGFzaChzbHVnKTtcbiAgICBsZXQgYWN0aXZlU2l0ZU5hbWUgPVxuICAgICAgb3B0aW9ucy5zaXRlTmFtZSB8fCBzdG9yZWRTaXRlLm5hbWUgfHwgc2l0ZU5hbWVMYWJlbD8uZGF0YXNldC5kZWZhdWx0U2l0ZU5hbWUgfHwgJyc7XG4gICAgc2l0ZUNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IGNhcmRTbHVnID0gZW5zdXJlTGVhZGluZ1NsYXNoKGNhcmQuZGF0YXNldC5zaXRlQ2FyZCB8fCAnJyk7XG4gICAgICBjb25zdCBpc0FjdGl2ZSA9IGNhcmRTbHVnID09PSBub3JtYWxpemVkU2x1ZztcbiAgICAgIGNvbnN0IGJhZGdlID0gY2FyZC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaXRlLWFjdGl2ZS1iYWRnZV0nKTtcbiAgICAgIGlmIChpc0FjdGl2ZSkge1xuICAgICAgICBjYXJkLmNsYXNzTGlzdC5hZGQoJ2JvcmRlci1bIzlDNkJGRl0nLCAncmluZy0yJywgJ3JpbmctWyM5QzZCRkZdJywgJ3NoYWRvdy1tZCcpO1xuICAgICAgICBjYXJkLmNsYXNzTGlzdC5yZW1vdmUoJ2JvcmRlci1zbGF0ZS0yMDAnKTtcbiAgICAgICAgYmFkZ2U/LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICBhY3RpdmVTaXRlTmFtZSA9IGNhcmQuZGF0YXNldC5zaXRlTmFtZSB8fCBhY3RpdmVTaXRlTmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNhcmQuY2xhc3NMaXN0LnJlbW92ZSgnYm9yZGVyLVsjOUM2QkZGXScsICdyaW5nLTInLCAncmluZy1bIzlDNkJGRl0nLCAnc2hhZG93LW1kJyk7XG4gICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnYm9yZGVyLXNsYXRlLTIwMCcpO1xuICAgICAgICBiYWRnZT8uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKG9wdGlvbnMucGVyc2lzdCAhPT0gZmFsc2UpIHtcbiAgICAgIHBlcnNpc3RTaXRlU3RhdGUobm9ybWFsaXplZFNsdWcsIG9wdGlvbnMuc2l0ZU5hbWUgfHwgYWN0aXZlU2l0ZU5hbWUpO1xuICAgIH1cbiAgICB1cGRhdGVTaXRlTGFiZWxzKG9wdGlvbnMuc2l0ZU5hbWUgfHwgYWN0aXZlU2l0ZU5hbWUpO1xuICB9O1xuXG4gIGNvbnN0IHNlbGVjdFNpdGUgPSBhc3luYyAoc2x1ZywgbmFtZSkgPT4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTbHVnID0gZW5zdXJlTGVhZGluZ1NsYXNoKHNsdWcpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL3NpdGVzL3NlbGVjdCcsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IHNsdWc6IG5vcm1hbGl6ZWRTbHVnIH0pLFxuICAgICAgfSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCByZXNwb25zZS5qc29uKCkuY2F0Y2goKCkgPT4gKHt9KSk7XG4gICAgICAgIHNob3dUb2FzdChwYXlsb2FkLm1lc3NhZ2UgfHwgJ0ltcG9zc2libGUgZGUgc1x1MDBFOWxlY3Rpb25uZXIgY2Ugc2l0ZS4nKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgIGNvbnN0IGZpbmFsU2x1ZyA9IGVuc3VyZUxlYWRpbmdTbGFzaChwYXlsb2FkLnNsdWcgfHwgbm9ybWFsaXplZFNsdWcpO1xuICAgICAgY29uc3QgZmluYWxOYW1lID0gcGF5bG9hZC5uYW1lIHx8IG5hbWU7XG4gICAgICBwZXJzaXN0U2l0ZVN0YXRlKGZpbmFsU2x1ZywgZmluYWxOYW1lKTtcbiAgICAgIGFwcGx5QWN0aXZlU2l0ZShmaW5hbFNsdWcsIHsgc2l0ZU5hbWU6IGZpbmFsTmFtZSwgcGVyc2lzdDogZmFsc2UgfSk7XG4gICAgICBjb25zdCBzbHVnUGF0aCA9IGVuY29kZVVSSUNvbXBvbmVudChzdHJpcExlYWRpbmdTbGFzaChmaW5hbFNsdWcpKTtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9hZG1pbi9zaXRlLyR7c2x1Z1BhdGh9L2Rlc2lnbmA7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbYWRtaW5dIEltcG9zc2libGUgZGUgc1x1MDBFOWxlY3Rpb25uZXIgbGUgc2l0ZScsIGVycik7XG4gICAgICBzaG93VG9hc3QoJ0VycmV1ciBpbmF0dGVuZHVlIGxvcnMgZGUgbGEgc1x1MDBFOWxlY3Rpb24uJyk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHN5bmNBY3RpdmVTaXRlRnJvbVNlcnZlciA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9zaXRlcy9jdXJyZW50JywgeyBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJyB9KTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0ICYmIHdvcmtzcGFjZUNvbnRleHQpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWRtaW4vc2l0ZXMnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNpdGUgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zdCBub3JtYWxpemVkU2x1ZyA9IGVuc3VyZUxlYWRpbmdTbGFzaChzaXRlLnNsdWcpO1xuICAgICAgcGVyc2lzdFNpdGVTdGF0ZShub3JtYWxpemVkU2x1Zywgc2l0ZS5uYW1lKTtcbiAgICAgIGFwcGx5QWN0aXZlU2l0ZShub3JtYWxpemVkU2x1ZywgeyBzaXRlTmFtZTogc2l0ZS5uYW1lLCBwZXJzaXN0OiBmYWxzZSB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybignW2FkbWluXSBJbXBvc3NpYmxlIGRlIHJcdTAwRTljdXBcdTAwRTlyZXIgbGUgc2l0ZSBhY3RpZicsIGVycik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhpZ2hsaWdodEZyb21TdG9yYWdlT3JEZWZhdWx0ID0gKCkgPT4ge1xuICAgIGlmIChzdG9yZWRTaXRlLnNsdWcpIHtcbiAgICAgIGFwcGx5QWN0aXZlU2l0ZShzdG9yZWRTaXRlLnNsdWcsIHsgc2l0ZU5hbWU6IHN0b3JlZFNpdGUubmFtZSwgcGVyc2lzdDogZmFsc2UgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRlZmF1bHRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtc2l0ZS1jYXJkXVtkYXRhLXNpdGUtZGVmYXVsdD1cInRydWVcIl0nKSB8fCBzaXRlQ2FyZHNbMF07XG4gICAgaWYgKGRlZmF1bHRDYXJkKSB7XG4gICAgICBhcHBseUFjdGl2ZVNpdGUoZGVmYXVsdENhcmQuZGF0YXNldC5zaXRlQ2FyZCwge1xuICAgICAgICBzaXRlTmFtZTogZGVmYXVsdENhcmQuZGF0YXNldC5zaXRlTmFtZSB8fCAnJyxcbiAgICAgICAgcGVyc2lzdDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgaGlnaGxpZ2h0RnJvbVN0b3JhZ2VPckRlZmF1bHQoKTtcbiAgc3luY0FjdGl2ZVNpdGVGcm9tU2VydmVyKCk7XG5cbiAgc2l0ZVNlbGVjdEJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKGJ1dHRvbi5kaXNhYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBzbHVnID0gYnV0dG9uLmRhdGFzZXQuc2l0ZVNlbGVjdDtcbiAgICAgIGNvbnN0IG5hbWUgPSBidXR0b24uZGF0YXNldC5zaXRlU2VsZWN0TmFtZSB8fCAnQ2Ugc2l0ZSc7XG4gICAgICBpZiAoIXNsdWcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIHNlbGVjdFNpdGUoc2x1ZywgbmFtZSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IHdvcmtzcGFjZVNsdWdpZnkgPSAodmFsdWUpID0+XG4gICAgdmFsdWVcbiAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnJlcGxhY2UoL1teYS16MC05XSsvZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL14tK3wtKyQvZywgJycpO1xuXG4gIGNvbnN0IG5vcm1hbGl6ZVNsdWdWYWx1ZSA9ICh2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IGJhc2UgPSB3b3Jrc3BhY2VTbHVnaWZ5KHZhbHVlIHx8ICcnKTtcbiAgICBpZiAoIWJhc2UpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIGAvJHtiYXNlfWA7XG4gIH07XG5cbiAgY29uc3Qgb3BlblNpdGVNb2RhbCA9ICgpID0+IHtcbiAgICBpZiAoIXNpdGVNb2RhbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsYXN0Rm9jdXNlZEVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgIHNpdGVNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICBzaXRlTW9kYWwuY2xhc3NMaXN0LmFkZCgnZmxleCcpO1xuICAgIHNsdWdNYW51YWxseUVkaXRlZCA9IGZhbHNlO1xuICAgIHNpdGVGb3JtPy5yZXNldCgpO1xuICAgIHNpdGVTbHVnRXJyb3IgJiYgKHNpdGVTbHVnRXJyb3IudGV4dENvbnRlbnQgPSAnJyk7XG4gICAgc2l0ZU1vZGFsRXJyb3IgJiYgKHNpdGVNb2RhbEVycm9yLnRleHRDb250ZW50ID0gJycpO1xuICAgIGlmIChzaXRlU2x1Z0lucHV0ICYmIHNpdGVOYW1lSW5wdXQpIHtcbiAgICAgIHNpdGVTbHVnSW5wdXQudmFsdWUgPSB3b3Jrc3BhY2VTbHVnaWZ5KHNpdGVOYW1lSW5wdXQudmFsdWUpO1xuICAgIH1cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdHJhcEZvY3VzKTtcbiAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzaXRlTmFtZUlucHV0Py5mb2N1cygpO1xuICAgIH0sIDApO1xuICB9O1xuXG4gIGNvbnN0IGNsb3NlU2l0ZU1vZGFsID0gKCkgPT4ge1xuICAgIGlmICghc2l0ZU1vZGFsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHNpdGVNb2RhbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICBzaXRlTW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnZmxleCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0cmFwRm9jdXMpO1xuICAgIHNsdWdNYW51YWxseUVkaXRlZCA9IGZhbHNlO1xuICAgIHNpdGVGb3JtPy5yZXNldCgpO1xuICAgIHNpdGVTbHVnRXJyb3IgJiYgKHNpdGVTbHVnRXJyb3IudGV4dENvbnRlbnQgPSAnJyk7XG4gICAgc2l0ZU1vZGFsRXJyb3IgJiYgKHNpdGVNb2RhbEVycm9yLnRleHRDb250ZW50ID0gJycpO1xuICAgIGxhc3RGb2N1c2VkRWxlbWVudD8uZm9jdXMoKTtcbiAgfTtcblxuICBzaXRlQ3JlYXRlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuU2l0ZU1vZGFsKTtcbiAgfSk7XG5cbiAgc2l0ZU1vZGFsQ2FuY2VsQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVNpdGVNb2RhbCk7XG4gIH0pO1xuXG4gIHNpdGVNb2RhbD8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBzaXRlTW9kYWwpIHtcbiAgICAgIGNsb3NlU2l0ZU1vZGFsKCk7XG4gICAgfVxuICB9KTtcblxuICBzaXRlTmFtZUlucHV0Py5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICBpZiAoIXNpdGVTbHVnSW5wdXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFzbHVnTWFudWFsbHlFZGl0ZWQgfHwgc2l0ZVNsdWdJbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBzaXRlU2x1Z0lucHV0LnZhbHVlID0gd29ya3NwYWNlU2x1Z2lmeShzaXRlTmFtZUlucHV0LnZhbHVlKTtcbiAgICB9XG4gIH0pO1xuXG4gIHNpdGVTbHVnSW5wdXQ/LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgIHNsdWdNYW51YWxseUVkaXRlZCA9IHRydWU7XG4gICAgc2l0ZVNsdWdFcnJvciAmJiAoc2l0ZVNsdWdFcnJvci50ZXh0Q29udGVudCA9ICcnKTtcbiAgfSk7XG5cbiAgY29uc3QgZ2V0U2x1Z1NldCA9ICgpID0+XG4gICAgbmV3IFNldChBcnJheS5mcm9tKHNpdGVDYXJkcykubWFwKChjYXJkKSA9PiBlbnN1cmVMZWFkaW5nU2xhc2goY2FyZC5kYXRhc2V0LnNpdGVDYXJkIHx8ICcnKSkpO1xuXG4gIHNpdGVGb3JtPy5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghc2l0ZU5hbWVJbnB1dCB8fCAhc2l0ZVNsdWdJbnB1dCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBuYW1lVmFsdWUgPSAoc2l0ZU5hbWVJbnB1dC52YWx1ZSB8fCAnJykudHJpbSgpO1xuICAgIGxldCBzbHVnVmFsdWUgPSBzaXRlU2x1Z0lucHV0LnZhbHVlIHx8ICcnO1xuICAgIGlmICghc2x1Z1ZhbHVlKSB7XG4gICAgICBzbHVnVmFsdWUgPSBuYW1lVmFsdWU7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRTbHVnID0gbm9ybWFsaXplU2x1Z1ZhbHVlKHNsdWdWYWx1ZSk7XG4gICAgaWYgKCFuYW1lVmFsdWUgfHwgIW5vcm1hbGl6ZWRTbHVnKSB7XG4gICAgICBzaXRlU2x1Z0Vycm9yICYmIChzaXRlU2x1Z0Vycm9yLnRleHRDb250ZW50ID0gJ05vbSBldCBzbHVnIHNvbnQgcmVxdWlzLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBleGlzdGluZ1NsdWdzID0gZ2V0U2x1Z1NldCgpO1xuICAgIGlmIChleGlzdGluZ1NsdWdzLmhhcyhub3JtYWxpemVkU2x1ZykpIHtcbiAgICAgIHNpdGVTbHVnRXJyb3IgJiYgKHNpdGVTbHVnRXJyb3IudGV4dENvbnRlbnQgPSAnQ2Ugc2x1ZyBlc3QgZFx1MDBFOWpcdTAwRTAgdXRpbGlzXHUwMEU5LicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzaXRlU2x1Z0Vycm9yICYmIChzaXRlU2x1Z0Vycm9yLnRleHRDb250ZW50ID0gJycpO1xuICAgIHNpdGVNb2RhbEVycm9yICYmIChzaXRlTW9kYWxFcnJvci50ZXh0Q29udGVudCA9ICcnKTtcbiAgICBpZiAoc2l0ZU1vZGFsU3VibWl0QnV0dG9uKSB7XG4gICAgICBzaXRlTW9kYWxTdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgc2l0ZU1vZGFsU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gJ0NyXHUwMEU5YXRpb24uLi4nO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9zaXRlcycsIHtcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IG5hbWVWYWx1ZSwgc2x1Zzogbm9ybWFsaXplZFNsdWcgfSksXG4gICAgICB9KTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHBheWxvYWQubWVzc2FnZSB8fCAnSW1wb3NzaWJsZSBkZSBjclx1MDBFOWVyIGNlIHNpdGUuJztcbiAgICAgICAgc2l0ZU1vZGFsRXJyb3IgJiYgKHNpdGVNb2RhbEVycm9yLnRleHRDb250ZW50ID0gbWVzc2FnZSk7XG4gICAgICAgIGlmIChwYXlsb2FkLmZpZWxkID09PSAnc2x1ZycpIHtcbiAgICAgICAgICBzaXRlU2x1Z0Vycm9yICYmIChzaXRlU2x1Z0Vycm9yLnRleHRDb250ZW50ID0gbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY3JlYXRlZFNpdGUgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICBjb25zdCBmaW5hbFNsdWcgPSBlbnN1cmVMZWFkaW5nU2xhc2goY3JlYXRlZFNpdGU/LnNsdWcgfHwgbm9ybWFsaXplZFNsdWcpO1xuICAgICAgY29uc3QgZmluYWxOYW1lID0gY3JlYXRlZFNpdGU/Lm5hbWUgfHwgbmFtZVZhbHVlO1xuICAgICAgcGVyc2lzdFNpdGVTdGF0ZShmaW5hbFNsdWcsIGZpbmFsTmFtZSk7XG4gICAgICBjbG9zZVNpdGVNb2RhbCgpO1xuICAgICAgY29uc3Qgc2x1Z1BhdGggPSBlbmNvZGVVUklDb21wb25lbnQoc3RyaXBMZWFkaW5nU2xhc2goZmluYWxTbHVnKSk7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGAvYWRtaW4vc2l0ZS8ke3NsdWdQYXRofS9kZXNpZ25gO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignW2FkbWluXSBJbXBvc3NpYmxlIGRlIGNyXHUwMEU5ZXIgbGUgc2l0ZScsIGVycik7XG4gICAgICBzaXRlTW9kYWxFcnJvciAmJiAoc2l0ZU1vZGFsRXJyb3IudGV4dENvbnRlbnQgPSAnRXJyZXVyIGluYXR0ZW5kdWUuIFJcdTAwRTllc3NhaWUgZGFucyB1biBpbnN0YW50LicpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoc2l0ZU1vZGFsU3VibWl0QnV0dG9uKSB7XG4gICAgICAgIHNpdGVNb2RhbFN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICBzaXRlTW9kYWxTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAnQ3JcdTAwRTllcic7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICBpZiAoc2l0ZU1vZGFsICYmICFzaXRlTW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICBjbG9zZVNpdGVNb2RhbCgpO1xuICAgICAgfVxuICAgICAgaWYgKHdvcmtzcGFjZUJhY2tNb2RhbCAmJiAhd29ya3NwYWNlQmFja01vZGFsLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgY2xvc2VXb3Jrc3BhY2VCYWNrTW9kYWwoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGdldFdvcmtzcGFjZUNvbnRleHQoKSB7XG4gICAgY29uc3QgbWF0Y2ggPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUubWF0Y2goL15cXC9hZG1pblxcL3NpdGVcXC8oW14vXSspKD86XFwvKFteL10rKSk/Lyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBzbHVnUGFydDogZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzFdKSxcbiAgICAgIHNsdWdWYWx1ZTogZW5zdXJlTGVhZGluZ1NsYXNoKGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFsxXSkpLFxuICAgICAgc2VjdGlvbjogbWF0Y2hbMl0gfHwgJ2Rlc2lnbicsXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5Xb3Jrc3BhY2VCYWNrTW9kYWwoKSB7XG4gICAgaWYgKCF3b3Jrc3BhY2VCYWNrTW9kYWwpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hZG1pbi9zaXRlcyc7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHdvcmtzcGFjZUJhY2tNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcbiAgICB3b3Jrc3BhY2VCYWNrTW9kYWwuY2xhc3NMaXN0LmFkZCgnZmxleCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VXb3Jrc3BhY2VCYWNrTW9kYWwoKSB7XG4gICAgaWYgKCF3b3Jrc3BhY2VCYWNrTW9kYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgd29ya3NwYWNlQmFja01vZGFsLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xuICAgIHdvcmtzcGFjZUJhY2tNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdmbGV4Jyk7XG4gIH1cblxuICB3b3Jrc3BhY2VCYWNrQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuV29ya3NwYWNlQmFja01vZGFsKTtcbiAgfSk7XG4gIHdvcmtzcGFjZUJhY2tDYW5jZWwuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VXb3Jrc3BhY2VCYWNrTW9kYWwpO1xuICB9KTtcbiAgd29ya3NwYWNlQmFja0NvbmZpcm0/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hZG1pbi9zaXRlcyc7XG4gIH0pO1xuXG4gIGlmICh3b3Jrc3BhY2VDb250ZXh0KSB7XG4gICAgd29ya3NwYWNlTmF2TGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuICAgICAgY29uc3QgdGFiID0gbGluay5kYXRhc2V0LndvcmtzcGFjZVRhYjtcbiAgICAgIGlmICghdGFiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVybCA9IGAvYWRtaW4vc2l0ZS8ke2VuY29kZVVSSUNvbXBvbmVudCh3b3Jrc3BhY2VDb250ZXh0LnNsdWdQYXJ0KX0vJHt0YWJ9YDtcbiAgICAgIGxpbmsuaHJlZiA9IHVybDtcbiAgICB9KTtcbiAgICBpZiAoc3RvcmVkU2l0ZS5uYW1lKSB7XG4gICAgICB1cGRhdGVTaXRlTGFiZWxzKHN0b3JlZFNpdGUubmFtZSk7XG4gICAgfVxuICB9XG59KTtcbiJdLAogICJtYXBwaW5ncyI6ICJNQUFBLFNBQVMsaUJBQWlCLG1CQUFvQixJQUFNLENBQ2xELFFBQVEsSUFBSSwyQkFBd0IsRUFDcEMsSUFBTUEsRUFBZSxTQUFTLGNBQWMsZUFBZSxFQUN2REEsR0FDRkEsRUFBYSxpQkFBaUIsUUFBUyxTQUFZLENBQ2pEQSxFQUFhLFNBQVcsR0FDeEIsR0FBSSxDQUNGLE1BQU0sTUFBTSxjQUFlLENBQ3pCLE9BQVEsT0FD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LENBQUMsQ0FBQyxDQUFDLEVBQzFELFFBQVNBLEVBQU0sQ0FBQyxHQUFLLFFBQ3ZCLEVBTlMsSUFPWCxDQUVBLFNBQVNDLElBQXlCLENBQ2hDLEdBQUksQ0FBQy9ELEVBQW9CLENBQ3ZCLE9BQU8sU0FBUyxLQUFPLGVBQ3ZCLE1BQ0YsQ0FDQUEsRUFBbUIsVUFBVSxPQUFPLFFBQVEsRUFDNUNBLEVBQW1CLFVBQVUsSUFBSSxNQUFNLENBQ3pDLENBRUEsU0FBUzZELEdBQTBCLENBQzVCN0QsSUFHTEEsRUFBbUIsVUFBVSxJQUFJLFFBQVEsRUFDekNBLEVBQW1CLFVBQVUsT0FBTyxNQUFNLEVBQzVDLENBRUFDLEdBQXFCLFFBQVNYLEdBQVcsQ0FDdkNBLEVBQU8saUJBQWlCLFFBQVN5RSxFQUFzQixDQUN6RCxDQUFDLEVBQ0Q3RCxHQUFvQixRQUFTWixHQUFXLENBQ3RDQSxFQUFPLGlCQUFpQixRQUFTdUUsQ0FBdUIsQ0FDMUQsQ0FBQyxFQUNEMUQsR0FBQSxNQUFBQSxFQUFzQixpQkFBaUIsUUFBUyxJQUFNLENBQ3BELE9BQU8sU0FBUyxLQUFPLGNBQ3pCLEdBRUlhLElBQ0ZaLEdBQWtCLFFBQVM0RCxHQUFTLENBQ2xDLElBQU1DLEVBQU1ELEVBQUssUUFBUSxhQUN6QixHQUFJLENBQUNDLEVBQ0gsT0FFRixJQUFNQyxFQUFNLGVBQWUsbUJBQW1CbEQsRUFBaUIsUUFBUSxDQUFDLElBQUlpRCxDQUFHLEdBQy9FRCxFQUFLLEtBQU9FLENBQ2QsQ0FBQyxFQUNHeEUsRUFBVyxNQUNieUMsRUFBaUJ6QyxFQUFXLElBQUksRUFHdEMsQ0FBQyIsCiAgIm5hbWVzIjogWyJsb2dvdXRCdXR0b24iLCAiZXJyIiwgInNpZGViYXIiLCAic2lkZWJhck92ZXJsYXkiLCAic2lkZWJhclRvZ2dsZXMiLCAic2lkZWJhckNsb3NlQnV0dG9ucyIsICJib2R5IiwgInNpZGViYXJPcGVuIiwgImFwcGx5U2lkZWJhclN0YXRlIiwgIm9wZW5TaWRlYmFyIiwgImNsb3NlU2lkZWJhciIsICJidXR0b24iLCAiZXZlbnQiLCAiQUNUSVZFX1NJVEVfS0VZIiwgIkFDVElWRV9TSVRFX05BTUVfS0VZIiwgInN0b3JlZFNpdGUiLCAic2l0ZUNhcmRzIiwgInNpdGVTZWxlY3RCdXR0b25zIiwgInNpdGVOYW1lTGFiZWwiLCAid29ya3NwYWNlU2l0ZUxhYmVsIiwgIndvcmtzcGFjZUJhY2tOYW1lIiwgIndvcmtzcGFjZUJhY2tNb2RhbCIsICJ3b3Jrc3BhY2VCYWNrQnV0dG9ucyIsICJ3b3Jrc3BhY2VCYWNrQ2FuY2VsIiwgIndvcmtzcGFjZUJhY2tDb25maXJtIiwgIndvcmtzcGFjZU5hdkxpbmtzIiwgInNpdGVUb2FzdCIsICJzaXRlVG9hc3RNZXNzYWdlIiwgInNpdGVDcmVhdGVCdXR0b25zIiwgInNpdGVNb2RhbCIsICJzaXRlRm9ybSIsICJzaXRlTmFtZUlucHV0IiwgInNpdGVTbHVnSW5wdXQiLCAic2l0ZVNsdWdFcnJvciIsICJzaXRlTW9kYWxFcnJvciIsICJzaXRlTW9kYWxDYW5jZWxCdXR0b25zIiwgInNpdGVNb2RhbFN1Ym1pdEJ1dHRvbiIsICJ3b3Jrc3BhY2VDb250ZXh0IiwgImdldFdvcmtzcGFjZUNvbnRleHQiLCAic2x1Z01hbnVhbGx5RWRpdGVkIiwgImxhc3RGb2N1c2VkRWxlbWVudCIsICJ0b2FzdFRpbWVvdXRJZCIsICJmb2N1c2FibGVTZWxlY3RvciIsICJ0cmFwRm9jdXMiLCAiZm9jdXNhYmxlRWxlbWVudHMiLCAiZWwiLCAiZmlyc3QiLCAibGFzdCIsICJzaG93VG9hc3QiLCAibWVzc2FnZSIsICJlbnN1cmVMZWFkaW5nU2xhc2giLCAic2x1ZyIsICJzdHJpcExlYWRpbmdTbGFzaCIsICJwZXJzaXN0U2l0ZVN0YXRlIiwgIm5hbWUiLCAibm9ybWFsaXplZFNsdWciLCAidXBkYXRlU2l0ZUxhYmVscyIsICJhcHBseUFjdGl2ZVNpdGUiLCAib3B0aW9ucyIsICJhY3RpdmVTaXRlTmFtZSIsICJjYXJkIiwgImlzQWN0aXZlIiwgImJhZGdlIiwgInNlbGVjdFNpdGUiLCAicmVzcG9uc2UiLCAicGF5bG9hZCIsICJmaW5hbFNsdWciLCAiZmluYWxOYW1lIiwgInNsdWdQYXRoIiwgInN5bmNBY3RpdmVTaXRlRnJvbVNlcnZlciIsICJzaXRlIiwgImRlZmF1bHRDYXJkIiwgIndvcmtzcGFjZVNsdWdpZnkiLCAidmFsdWUiLCAibm9ybWFsaXplU2x1Z1ZhbHVlIiwgImJhc2UiLCAib3BlblNpdGVNb2RhbCIsICJjbG9zZVNpdGVNb2RhbCIsICJnZXRTbHVnU2V0IiwgIm5hbWVWYWx1ZSIsICJzbHVnVmFsdWUiLCAiY3JlYXRlZFNpdGUiLCAiY2xvc2VXb3Jrc3BhY2VCYWNrTW9kYWwiLCAibWF0Y2giLCAib3BlbldvcmtzcGFjZUJhY2tNb2RhbCIsICJsaW5rIiwgInRhYiIsICJ1cmwiXQp9Cg==
