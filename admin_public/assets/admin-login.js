(()=>{document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("form[data-login-form]"),t=document.querySelector("[data-login-status]");e&&e.addEventListener("submit",async s=>{s.preventDefault(),t.textContent="";let n=e.querySelector('button[type="submit"]');n.disabled=!0;try{let o={username:e.elements.username.value,password:e.elements.password.value},a=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(a.ok){window.location.href="/admin_public";return}let r=await a.json().catch(()=>({}));t.textContent=r.message||"Identifiants invalides."}catch{t.textContent="Erreur de connexion."}finally{n.disabled=!1}})});})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vY29yZS9zY3JpcHRzL2FkbWluLWxvZ2luLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLWxvZ2luLWZvcm1dJyk7XG4gIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxvZ2luLXN0YXR1c10nKTtcblxuICBpZiAoIWZvcm0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc3RhdHVzLnRleHRDb250ZW50ID0gJyc7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgdXNlcm5hbWU6IGZvcm0uZWxlbWVudHMudXNlcm5hbWUudmFsdWUsXG4gICAgICAgIHBhc3N3b3JkOiBmb3JtLmVsZW1lbnRzLnBhc3N3b3JkLnZhbHVlLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvbG9naW4nLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICB9KTtcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWRtaW5fcHVibGljJztcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgYm9keSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICAgIHN0YXR1cy50ZXh0Q29udGVudCA9IGJvZHkubWVzc2FnZSB8fCAnSWRlbnRpZmlhbnRzIGludmFsaWRlcy4nO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgc3RhdHVzLnRleHRDb250ZW50ID0gJ0VycmV1ciBkZSBjb25uZXhpb24uJztcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9KTtcbn0pO1xuXG4iXSwKICAibWFwcGluZ3MiOiAiTUFBQSxTQUFTLGlCQUFpQixtQkFBb0IsSUFBTSxDQUNsRCxJQUFNQSxFQUFPLFNBQVMsY0FBYyx1QkFBdUIsRUFDckRDLEVBQVMsU0FBUyxjQUFjLHFCQUFxQixFQUV0REQsR0FJTEEsRUFBSyxpQkFBaUIsU0FBVSxNQUFPRSxHQUFVLENBQy9DQSxFQUFNLGVBQWUsRUFDckJELEVBQU8sWUFBYyxHQUNyQixJQUFNRSxFQUFlSCxFQUFLLGNBQWMsdUJBQXVCLEVBQy9ERyxFQUFhLFNBQVcsR0FFeEIsR0FBSSxDQUNGLElBQU1DLEVBQVUsQ0FDZCxTQUFVSixFQUFLLFNBQVMsU0FBUyxNQUNqQyxTQUFVQSxFQUFLLFNBQVMsU0FBUyxLQUNuQyxFQUNNSyxFQUFXLE1BQU0sTUFBTSxhQUFjLENBQ3pDLE9BQVEsT0FDUixRQUFTLENBQ1AsZUFBZ0Isa0JBQ2xCLEVBQ0EsS0FBTSxLQUFLLFVBQVVELENBQU8sQ0FDOUIsQ0FBQyxFQUNELEdBQUlDLEVBQVMsR0FBSSxDQUNmLE9BQU8sU0FBUyxLQUFPLGdCQUN2QixNQUNGLENBQ0EsSUFBTUMsRUFBTyxNQUFNRCxFQUFTLEtBQUssRUFBRSxNQUFNLEtBQU8sQ0FBQyxFQUFFLEVBQ25ESixFQUFPLFlBQWNLLEVBQUssU0FBVyx5QkFDdkMsTUFBYyxDQUNaTCxFQUFPLFlBQWMsc0JBQ3ZCLFFBQUUsQ0FDQUUsRUFBYSxTQUFXLEVBQzFCLENBQ0YsQ0FBQyxDQUNILENBQUMiLAogICJuYW1lcyI6IFsiZm9ybSIsICJzdGF0dXMiLCAiZXZlbnQiLCAic3VibWl0QnV0dG9uIiwgInBheWxvYWQiLCAicmVzcG9uc2UiLCAiYm9keSJdCn0K
