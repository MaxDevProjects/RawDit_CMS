(()=>{document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("form[data-login-form]"),t=document.querySelector("[data-login-status]");e&&e.addEventListener("submit",async a=>{a.preventDefault(),t.textContent="";let n=e.querySelector('button[type="submit"]');n.disabled=!0;try{let o={username:e.elements.username.value,password:e.elements.password.value},s=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(s.ok){window.location.href="/admin/sites";return}let r=await s.json().catch(()=>({}));t.textContent=r.message||"Identifiants invalides."}catch{t.textContent="Erreur de connexion."}finally{n.disabled=!1}})});})();
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vY29yZS9zY3JpcHRzL2FkbWluLWxvZ2luLmpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtkYXRhLWxvZ2luLWZvcm1dJyk7XG4gIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxvZ2luLXN0YXR1c10nKTtcblxuICBpZiAoIWZvcm0pIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgc3RhdHVzLnRleHRDb250ZW50ID0gJyc7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKCdidXR0b25bdHlwZT1cInN1Ym1pdFwiXScpO1xuICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgdXNlcm5hbWU6IGZvcm0uZWxlbWVudHMudXNlcm5hbWUudmFsdWUsXG4gICAgICAgIHBhc3N3b3JkOiBmb3JtLmVsZW1lbnRzLnBhc3N3b3JkLnZhbHVlLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvbG9naW4nLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG4gICAgICB9KTtcbiAgICAgIGlmIChyZXNwb25zZS5vaykge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWRtaW4vc2l0ZXMnO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpLmNhdGNoKCgpID0+ICh7fSkpO1xuICAgICAgc3RhdHVzLnRleHRDb250ZW50ID0gYm9keS5tZXNzYWdlIHx8ICdJZGVudGlmaWFudHMgaW52YWxpZGVzLic7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSAnRXJyZXVyIGRlIGNvbm5leGlvbi4nO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH0pO1xufSk7XG4iXSwKICAibWFwcGluZ3MiOiAiTUFBQSxTQUFTLGlCQUFpQixtQkFBb0IsSUFBTSxDQUNsRCxJQUFNQSxFQUFPLFNBQVMsY0FBYyx1QkFBdUIsRUFDckRDLEVBQVMsU0FBUyxjQUFjLHFCQUFxQixFQUV0REQsR0FJTEEsRUFBSyxpQkFBaUIsU0FBVSxNQUFPRSxHQUFVLENBQy9DQSxFQUFNLGVBQWUsRUFDckJELEVBQU8sWUFBYyxHQUNyQixJQUFNRSxFQUFlSCxFQUFLLGNBQWMsdUJBQXVCLEVBQy9ERyxFQUFhLFNBQVcsR0FFeEIsR0FBSSxDQUNGLElBQU1DLEVBQVUsQ0FDZCxTQUFVSixFQUFLLFNBQVMsU0FBUyxNQUNqQyxTQUFVQSxFQUFLLFNBQVMsU0FBUyxLQUNuQyxFQUNNSyxFQUFXLE1BQU0sTUFBTSxhQUFjLENBQ3pDLE9BQVEsT0FDUixRQUFTLENBQ1AsZUFBZ0Isa0JBQ2xCLEVBQ0EsS0FBTSxLQUFLLFVBQVVELENBQU8sQ0FDOUIsQ0FBQyxFQUNELEdBQUlDLEVBQVMsR0FBSSxDQUNmLE9BQU8sU0FBUyxLQUFPLGVBQ3ZCLE1BQ0YsQ0FDQSxJQUFNQyxFQUFPLE1BQU1ELEVBQVMsS0FBSyxFQUFFLE1BQU0sS0FBTyxDQUFDLEVBQUUsRUFDbkRKLEVBQU8sWUFBY0ssRUFBSyxTQUFXLHlCQUN2QyxNQUFjLENBQ1pMLEVBQU8sWUFBYyxzQkFDdkIsUUFBRSxDQUNBRSxFQUFhLFNBQVcsRUFDMUIsQ0FDRixDQUFDLENBQ0gsQ0FBQyIsCiAgIm5hbWVzIjogWyJmb3JtIiwgInN0YXR1cyIsICJldmVudCIsICJzdWJtaXRCdXR0b24iLCAicGF5bG9hZCIsICJyZXNwb25zZSIsICJib2R5Il0KfQo=
